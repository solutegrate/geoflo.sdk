

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Source: src/Features.js | Documentation</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-jsdoc.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/tui-doc.css">

    
        
            <link type="text/css" rel="stylesheet" href="./styles/custom.css">
        
    
</head>
<body>
<nav class="lnb" id="lnb">
    <div class="logo" style="">
        
            <a href="https://docs.geoflo.pro" rel="noopener noreferrer" target="_blank">
                <img src="https://geoflo.s3.amazonaws.com/logos/logo_full_white.png" width="100%" height="100%">
            </a>
        
    </div>
    <div class="title">
        <h1><a href="index.html" class="link">Documentation</a></h1>
        
            <span class="version">v1.1.0</span>
        
    </div>
    <div class="search-container" id="search-container">
        <input type="text" placeholder="Search">
        <ul></ul>
    </div>
    
        <ol class="lnb-tab">
            <li id="api-tab">
                <a href="#"><h4>SDK</h4></a>
            </li>
            <li id="examples-tab">
                <a href="#"><h4>Examples</h4></a>
            </li>
        </ol>
    
    <div class="lnb-examples hidden"><h3>Examples</h3><ul><li><a href="tutorial-basic.html">Version 1.1.0</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="basic_sub"></div></li></ul></div><div class="lnb-api hidden"><h3>Modules</h3><ul><li><a href="module-geoflo.html">geoflo</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:geoflo_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-geoflo.html#.activateExploring">activateExploring</a></li><li><a href="module-geoflo.html#.activatePainting">activatePainting</a></li><li><a href="module-geoflo.html#.activatePinning">activatePinning</a></li><li><a href="module-geoflo.html#.activateRouting">activateRouting</a></li><li><a href="module-geoflo.html#.activateSnapping">activateSnapping</a></li><li><a href="module-geoflo.html#.addControl">addControl</a></li><li><a href="module-geoflo.html#.addControls">addControls</a></li><li><a href="module-geoflo.html#.addFeatures">addFeatures</a></li><li><a href="module-geoflo.html#.addFeaturesToMesh">addFeaturesToMesh</a></li><li><a href="module-geoflo.html#.addFeaturesToSelected">addFeaturesToSelected</a></li><li><a href="module-geoflo.html#.cancelEdit">cancelEdit</a></li><li><a href="module-geoflo.html#.combineSelectedFeatures">combineSelectedFeatures</a></li><li><a href="module-geoflo.html#.createPolygon">createPolygon</a></li><li><a href="module-geoflo.html#.deactivateExploring">deactivateExploring</a></li><li><a href="module-geoflo.html#.deactivatePainting">deactivatePainting</a></li><li><a href="module-geoflo.html#.deactivatePinning">deactivatePinning</a></li><li><a href="module-geoflo.html#.deactivateRouting">deactivateRouting</a></li><li><a href="module-geoflo.html#.deactivateSnapping">deactivateSnapping</a></li><li><a href="module-geoflo.html#.deleteMeshData">deleteMeshData</a></li><li><a href="module-geoflo.html#.deleteUserData">deleteUserData</a></li><li><a href="module-geoflo.html#.disable">disable</a></li><li><a href="module-geoflo.html#.editFeature">editFeature</a></li><li><a href="module-geoflo.html#.enable">enable</a></li><li><a href="module-geoflo.html#.fire">fire</a></li><li><a href="module-geoflo.html#.forEachSelectedFeature">forEachSelectedFeature</a></li><li><a href="module-geoflo.html#.getButtons">getButtons</a></li><li><a href="module-geoflo.html#.getColors">getColors</a></li><li><a href="module-geoflo.html#.getCommonGeometryType">getCommonGeometryType</a></li><li><a href="module-geoflo.html#.getControlIds">getControlIds</a></li><li><a href="module-geoflo.html#.getDrawnFeatures">getDrawnFeatures</a></li><li><a href="module-geoflo.html#.getFeatureById">getFeatureById</a></li><li><a href="module-geoflo.html#.getFeaturesByLayer">getFeaturesByLayer</a></li><li><a href="module-geoflo.html#.getHotFeature">getHotFeature</a></li><li><a href="module-geoflo.html#.getMap">getMap</a></li><li><a href="module-geoflo.html#.getMode">getMode</a></li><li><a href="module-geoflo.html#.getModes">getModes</a></li><li><a href="module-geoflo.html#.getRenderedDrawnFeatures">getRenderedDrawnFeatures</a></li><li><a href="module-geoflo.html#.getRenderedFeatures">getRenderedFeatures</a></li><li><a href="module-geoflo.html#.getRenderedSnapFeatures">getRenderedSnapFeatures</a></li><li><a href="module-geoflo.html#.getSelectedFeatureIds">getSelectedFeatureIds</a></li><li><a href="module-geoflo.html#.getSelectedFeatures">getSelectedFeatures</a></li><li><a href="module-geoflo.html#.getSelectedFeaturesBbox">getSelectedFeaturesBbox</a></li><li><a href="module-geoflo.html#.getSelectedPropertyNames">getSelectedPropertyNames</a></li><li><a href="module-geoflo.html#.getSelectedPropertyValues">getSelectedPropertyValues</a></li><li><a href="module-geoflo.html#.getSnapFeatures">getSnapFeatures</a></li><li><a href="module-geoflo.html#.hasControls">hasControls</a></li><li><a href="module-geoflo.html#.hasSelection">hasSelection</a></li><li><a href="module-geoflo.html#.hasSingleSelection">hasSingleSelection</a></li><li><a href="module-geoflo.html#.hideFeatures">hideFeatures</a></li><li><a href="module-geoflo.html#.hideSelectedFeatures">hideSelectedFeatures</a></li><li><a href="module-geoflo.html#.init">init</a></li><li><a href="module-geoflo.html#.loadFeatures">loadFeatures</a></li><li><a href="module-geoflo.html#.moveFeature">moveFeature</a></li><li><a href="module-geoflo.html#.moveMapAlongLine">moveMapAlongLine</a></li><li><a href="module-geoflo.html#.moveSelectedFeatures">moveSelectedFeatures</a></li><li><a href="module-geoflo.html#.off">off</a></li><li><a href="module-geoflo.html#.on">on</a></li><li><a href="module-geoflo.html#.once">once</a></li><li><a href="module-geoflo.html#.redraw">redraw</a></li><li><a href="module-geoflo.html#.refresh">refresh</a></li><li><a href="module-geoflo.html#.refreshMeshData">refreshMeshData</a></li><li><a href="module-geoflo.html#.removeControl">removeControl</a></li><li><a href="module-geoflo.html#.removeControls">removeControls</a></li><li><a href="module-geoflo.html#.removeEventListeners-Removeseventlistenersfromthemapandotherelements.">removeEventListeners - Removes event listeners from the map and other elements.</a></li><li><a href="module-geoflo.html#.removeFeature">removeFeature</a></li><li><a href="module-geoflo.html#.removeFeatures">removeFeatures</a></li><li><a href="module-geoflo.html#.removePopup">removePopup</a></li><li><a href="module-geoflo.html#.removeSelection">removeSelection</a></li><li><a href="module-geoflo.html#.saveEdit">saveEdit</a></li><li><a href="module-geoflo.html#.saveFeatures">saveFeatures</a></li><li><a href="module-geoflo.html#.selectFeature">selectFeature</a></li><li><a href="module-geoflo.html#.setActiveButton">setActiveButton</a></li><li><a href="module-geoflo.html#.setButtons">setButtons</a></li><li><a href="module-geoflo.html#.setCenterMarker">setCenterMarker</a></li><li><a href="module-geoflo.html#.setColors">setColors</a></li><li><a href="module-geoflo.html#.setIcon">setIcon</a></li><li><a href="module-geoflo.html#.setLayers">setLayers</a></li><li><a href="module-geoflo.html#.setMapClass">setMapClass</a></li><li><a href="module-geoflo.html#.setMeshFeatures">setMeshFeatures</a></li><li><a href="module-geoflo.html#.setMode">setMode</a></li><li><a href="module-geoflo.html#.setOpacity">setOpacity</a></li><li><a href="module-geoflo.html#.setOptions">setOptions</a></li><li><a href="module-geoflo.html#.setSelectedFeatures">setSelectedFeatures</a></li><li><a href="module-geoflo.html#.setTheme">setTheme</a></li><li><a href="module-geoflo.html#.updateFeatures">updateFeatures</a></li><li><a href="module-geoflo.html#.updateMeshData">updateMeshData</a></li><li><a href="module-geoflo.html#.updateOrientation">updateOrientation</a></li><li><a href="module-geoflo.html#.updateSelectedProperties">updateSelectedProperties</a></li><li><a href="module-geoflo.html#.zoomToFeatures">zoomToFeatures</a></li></ul></div></li></ul></div><div class="lnb-api hidden"><h3>Mixins</h3><ul><li><a href="module-geoflo.Control.html">Control</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:geoflo.Control_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-geoflo.Control.html#.disable">disable</a></li><li><a href="module-geoflo.Control.html#.enable">enable</a></li><li><a href="module-geoflo.Control.html#.getButtons">getButtons</a></li><li><a href="module-geoflo.Control.html#.getControl">getControl</a></li><li><a href="module-geoflo.Control.html#.hideControl">hideControl</a></li><li><a href="module-geoflo.Control.html#.onAdd">onAdd</a></li><li><a href="module-geoflo.Control.html#.onRemove">onRemove</a></li><li><a href="module-geoflo.Control.html#.setAttribution">setAttribution</a></li><li><a href="module-geoflo.Control.html#.setControl">setControl</a></li><li><a href="module-geoflo.Control.html#.setMode">setMode</a></li><li><a href="module-geoflo.Control.html#.showControl">showControl</a></li></ul></div></li><li><a href="module-geoflo.Draw.html">Draw</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:geoflo.Draw_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-geoflo.Draw.html#.activate">activate</a></li><li><a href="module-geoflo.Draw.html#.canHandle">canHandle</a></li><li><a href="module-geoflo.Draw.html#.cancelEdit">cancelEdit</a></li><li><a href="module-geoflo.Draw.html#.deactivate">deactivate</a></li><li><a href="module-geoflo.Draw.html#.deleteVertex">deleteVertex</a></li><li><a href="module-geoflo.Draw.html#.getFeature">getFeature</a></li><li><a href="module-geoflo.Draw.html#.handleClick">handleClick</a></li><li><a href="module-geoflo.Draw.html#.handleContext">handleContext</a></li><li><a href="module-geoflo.Draw.html#.handleDown">handleDown</a></li><li><a href="module-geoflo.Draw.html#.handleDrag">handleDrag</a></li><li><a href="module-geoflo.Draw.html#.handleHistory">handleHistory</a></li><li><a href="module-geoflo.Draw.html#.handleIcon">handleIcon</a></li><li><a href="module-geoflo.Draw.html#.handleMove">handleMove</a></li><li><a href="module-geoflo.Draw.html#.handleOffMap">handleOffMap</a></li><li><a href="module-geoflo.Draw.html#.handleOnMap">handleOnMap</a></li><li><a href="module-geoflo.Draw.html#.handlePainting">handlePainting</a></li><li><a href="module-geoflo.Draw.html#.handleRectangle">handleRectangle</a></li><li><a href="module-geoflo.Draw.html#.handleRedo">handleRedo</a></li><li><a href="module-geoflo.Draw.html#.handleText">handleText</a></li><li><a href="module-geoflo.Draw.html#.handleTouch">handleTouch</a></li><li><a href="module-geoflo.Draw.html#.handleUndo">handleUndo</a></li><li><a href="module-geoflo.Draw.html#.handleUp">handleUp</a></li><li><a href="module-geoflo.Draw.html#.saveEdit">saveEdit</a></li><li><a href="module-geoflo.Draw.html#.selectFeature">selectFeature</a></li><li><a href="module-geoflo.Draw.html#.updateHotSource">updateHotSource</a></li></ul></div></li><li><a href="module-geoflo.Exploring.html">Exploring</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:geoflo.Exploring_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-geoflo.Exploring.html#.activate">activate</a></li><li><a href="module-geoflo.Exploring.html#.deactivate">deactivate</a></li><li><a href="module-geoflo.Exploring.html#.getFeatures">getFeatures</a></li><li><a href="module-geoflo.Exploring.html#.getMatch">getMatch</a></li><li><a href="module-geoflo.Exploring.html#.getRoute">getRoute</a></li><li><a href="module-geoflo.Exploring.html#.setFeature">setFeature</a></li><li><a href="module-geoflo.Exploring.html#.setFeatures">setFeatures</a></li></ul></div></li><li><a href="module-geoflo.Features.html">Features</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:geoflo.Features_sub"></div></li><li><a href="module-geoflo.Gaming.html">Gaming</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:geoflo.Gaming_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-geoflo.Gaming.html#.init">init</a></li><li><a href="module-geoflo.Gaming.html#.refresh">refresh</a></li><li><a href="module-geoflo.Gaming.html#.remove">remove</a></li><li><a href="module-geoflo.Gaming.html#.setBearing">setBearing</a></li><li><a href="module-geoflo.Gaming.html#.setCenter">setCenter</a></li><li><a href="module-geoflo.Gaming.html#.setContainer">setContainer</a></li><li><a href="module-geoflo.Gaming.html#.setGamepad">setGamepad</a></li><li><a href="module-geoflo.Gaming.html#.setLocation">setLocation</a></li><li><a href="module-geoflo.Gaming.html#.setMap">setMap</a></li><li><a href="module-geoflo.Gaming.html#.setMarker">setMarker</a></li><li><a href="module-geoflo.Gaming.html#.setPitch">setPitch</a></li><li><a href="module-geoflo.Gaming.html#.setSpeed">setSpeed</a></li><li><a href="module-geoflo.Gaming.html#.setZoom">setZoom</a></li><li><a href="module-geoflo.Gaming.html#.trigger">trigger</a></li></ul></div></li><li><a href="module-geoflo.Layers.html">Layers</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:geoflo.Layers_sub"></div></li><li><a href="module-geoflo.Locate.html">Locate</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:geoflo.Locate_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-geoflo.Locate.html#.bearing">bearing</a></li><li><a href="module-geoflo.Locate.html#.build">build</a></li><li><a href="module-geoflo.Locate.html#.follow">follow</a></li><li><a href="module-geoflo.Locate.html#.getButton">getButton</a></li><li><a href="module-geoflo.Locate.html#.heading">heading</a></li><li><a href="module-geoflo.Locate.html#.init">init</a></li><li><a href="module-geoflo.Locate.html#.locate">locate</a></li><li><a href="module-geoflo.Locate.html#.onAdd">onAdd</a></li><li><a href="module-geoflo.Locate.html#.onControlEvent">onControlEvent</a></li><li><a href="module-geoflo.Locate.html#.onLocate">onLocate</a></li><li><a href="module-geoflo.Locate.html#.onMapMove">onMapMove</a></li><li><a href="module-geoflo.Locate.html#.ready">ready</a></li><li><a href="module-geoflo.Locate.html#.relocate">relocate</a></li><li><a href="module-geoflo.Locate.html#.removeClasses">removeClasses</a></li><li><a href="module-geoflo.Locate.html#.state">state</a></li><li><a href="module-geoflo.Locate.html#.unlocate">unlocate</a></li><li><a href="module-geoflo.Locate.html#.update">update</a></li></ul></div></li><li><a href="module-geoflo.Mesh.html">Mesh</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:geoflo.Mesh_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-geoflo.Mesh.html#.addNewFeatures">addNewFeatures</a></li><li><a href="module-geoflo.Mesh.html#.getFeatureById">getFeatureById</a></li><li><a href="module-geoflo.Mesh.html#.getFeatures">getFeatures</a></li><li><a href="module-geoflo.Mesh.html#.getFeaturesByParentId">getFeaturesByParentId</a></li><li><a href="module-geoflo.Mesh.html#.getFeaturesFromIndex">getFeaturesFromIndex</a></li><li><a href="module-geoflo.Mesh.html#.removeFeature">removeFeature</a></li><li><a href="module-geoflo.Mesh.html#.splitSegmentAtPoint">splitSegmentAtPoint</a></li></ul></div></li><li><a href="module-geoflo.Options.html">Options</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:geoflo.Options_sub"></div></li><li><a href="module-geoflo.Painting.html">Painting</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:geoflo.Painting_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-geoflo.Painting.html#.activate">activate</a></li><li><a href="module-geoflo.Painting.html#.deactivate">deactivate</a></li><li><a href="module-geoflo.Painting.html#.handleUp">handleUp</a></li><li><a href="module-geoflo.Painting.html#.setFeature">setFeature</a></li><li><a href="module-geoflo.Painting.html#.updateFeature">updateFeature</a></li></ul></div></li><li><a href="module-geoflo.Pinning.html">Pinning</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:geoflo.Pinning_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-geoflo.Pinning.html#.activate">activate</a></li><li><a href="module-geoflo.Pinning.html#.deactivate">deactivate</a></li><li><a href="module-geoflo.Pinning.html#.getFeatures">getFeatures</a></li><li><a href="module-geoflo.Pinning.html#.getNearByFeatures">getNearByFeatures</a></li><li><a href="module-geoflo.Pinning.html#.resetFeatures">resetFeatures</a></li><li><a href="module-geoflo.Pinning.html#.setBuffer">setBuffer</a></li><li><a href="module-geoflo.Pinning.html#.setFeatures">setFeatures</a></li><li><a href="module-geoflo.Pinning.html#.updateFeatures">updateFeatures</a></li></ul></div></li><li><a href="module-geoflo.Routing.html">Routing</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:geoflo.Routing_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-geoflo.Routing.html#.activate">activate</a></li><li><a href="module-geoflo.Routing.html#.deactivate">deactivate</a></li><li><a href="module-geoflo.Routing.html#.getClosest">getClosest</a></li><li><a href="module-geoflo.Routing.html#.getFeatures">getFeatures</a></li><li><a href="module-geoflo.Routing.html#.getMatch">getMatch</a></li><li><a href="module-geoflo.Routing.html#.getRoute">getRoute</a></li></ul></div></li><li><a href="module-geoflo.Select.html">Select</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:geoflo.Select_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-geoflo.Select.html#.activate">activate</a></li><li><a href="module-geoflo.Select.html#.addPopup">addPopup</a></li><li><a href="module-geoflo.Select.html#.canHandle">canHandle</a></li><li><a href="module-geoflo.Select.html#.deactivate">deactivate</a></li><li><a href="module-geoflo.Select.html#.deselectCurrentFeature">deselectCurrentFeature</a></li><li><a href="module-geoflo.Select.html#.handleClick">handleClick</a></li><li><a href="module-geoflo.Select.html#.handleDrag">handleDrag</a></li><li><a href="module-geoflo.Select.html#.handleMove">handleMove</a></li><li><a href="module-geoflo.Select.html#.removePopup">removePopup</a></li><li><a href="module-geoflo.Select.html#.selectFeature">selectFeature</a></li></ul></div></li><li><a href="module-geoflo.Snapping.html">Snapping</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:geoflo.Snapping_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-geoflo.Snapping.html#.activate">activate</a></li><li><a href="module-geoflo.Snapping.html#.addFeature">addFeature</a></li><li><a href="module-geoflo.Snapping.html#.deactivate">deactivate</a></li><li><a href="module-geoflo.Snapping.html#.getClosest">getClosest</a></li><li><a href="module-geoflo.Snapping.html#.setClosest">setClosest</a></li><li><a href="module-geoflo.Snapping.html#.setFeature">setFeature</a></li><li><a href="module-geoflo.Snapping.html#.setVertex">setVertex</a></li><li><a href="module-geoflo.Snapping.html#.updateFeature">updateFeature</a></li></ul></div></li><li><a href="module-geoflo.Styles.html">Styles</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:geoflo.Styles_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-geoflo.Styles.html#.closeModal">closeModal</a></li><li><a href="module-geoflo.Styles.html#.getDefaultPosition">getDefaultPosition</a></li><li><a href="module-geoflo.Styles.html#.hide">hide</a></li><li><a href="module-geoflo.Styles.html#.init">init</a></li><li><a href="module-geoflo.Styles.html#.onAdd">onAdd</a></li><li><a href="module-geoflo.Styles.html#.onRemove">onRemove</a></li><li><a href="module-geoflo.Styles.html#.openModal">openModal</a></li><li><a href="module-geoflo.Styles.html#.select">select</a></li><li><a href="module-geoflo.Styles.html#.show">show</a></li></ul></div></li><li><a href="module-geoflo.Utilities.html">Utilities</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:geoflo.Utilities_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-geoflo.Utilities.html#.assignDeep">assignDeep</a></li><li><a href="module-geoflo.Utilities.html#.clone">clone</a></li><li><a href="module-geoflo.Utilities.html#.cloneDeep">cloneDeep</a></li><li><a href="module-geoflo.Utilities.html#.combineSameTypeFeatures">combineSameTypeFeatures</a></li><li><a href="module-geoflo.Utilities.html#.compareDeep">compareDeep</a></li><li><a href="module-geoflo.Utilities.html#.consumableArray">consumableArray</a></li><li><a href="module-geoflo.Utilities.html#.degrees2meters">degrees2meters</a></li><li><a href="module-geoflo.Utilities.html#.extend">extend</a></li><li><a href="module-geoflo.Utilities.html#.getLastIndexCoords">getLastIndexCoords</a></li><li><a href="module-geoflo.Utilities.html#.getRandomColor">getRandomColor</a></li><li><a href="module-geoflo.Utilities.html#.isEmptyLineString">isEmptyLineString</a></li><li><a href="module-geoflo.Utilities.html#.isLastIndex">isLastIndex</a></li><li><a href="module-geoflo.Utilities.html#.isLineString">isLineString</a></li><li><a href="module-geoflo.Utilities.html#.isPoint">isPoint</a></li><li><a href="module-geoflo.Utilities.html#.isPointEqual">isPointEqual</a></li><li><a href="module-geoflo.Utilities.html#.isPolygon">isPolygon</a></li><li><a href="module-geoflo.Utilities.html#.isValidLineString">isValidLineString</a></li><li><a href="module-geoflo.Utilities.html#.meters2degrees">meters2degrees</a></li><li><a href="module-geoflo.Utilities.html#.reducePrecision">reducePrecision</a></li><li><a href="module-geoflo.Utilities.html#.setProperties">setProperties</a></li><li><a href="module-geoflo.Utilities.html#.setProperty">setProperty</a></li><li><a href="module-geoflo.Utilities.html#.stringToDOM">stringToDOM</a></li></ul></div></li></ul></div><div class="lnb-api hidden"><h3>Global</h3><ul><li><a href="global.html#addLayer">addLayer</a></li><li><a href="global.html#addLayers">addLayers</a></li><li><a href="global.html#addSource">addSource</a></li><li><a href="global.html#addSources">addSources</a></li><li><a href="global.html#addTextLayer">addTextLayer</a></li><li><a href="global.html#init">init</a></li><li><a href="global.html#moveLayers">moveLayers</a></li><li><a href="global.html#onClusterClick">onClusterClick</a></li><li><a href="global.html#onLayerMouseout">onLayerMouseout</a></li><li><a href="global.html#onLayerMouseover">onLayerMouseover</a></li><li><a href="global.html#refresh">refresh</a></li><li><a href="global.html#removeCustomLayers">removeCustomLayers</a></li><li><a href="global.html#removeLayer">removeLayer</a></li><li><a href="global.html#removeLayers">removeLayers</a></li><li><a href="global.html#removeSource">removeSource</a></li><li><a href="global.html#removeSources">removeSources</a></li><li><a href="global.html#removeTextLayer">removeTextLayer</a></li></ul></div>
</nav>
<div id="resizer"></div>

<div class="main" id="main">
    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @mixin
 * @memberof module:geoflo
 * @name Features
 * @description This module provides the features functionality for the Geoflo application. It allows users to add, remove, update, and retrieve features from the map.
 * @returns {Object} Returns the Features object.
 * @throws {Error} Throws an error if no map object is provided.
 */
const Features = function () {
    const geoflo = this.geoflo;
    if (!geoflo.map) { throw new Error('No map object provided!') }

    this.featuresMap = new Map();

    this.getFeatures = function () {
        return Array.from(this.featuresMap.values());
    };

    this.getFeatureById = function (id) {
        if (Array.isArray(id) &amp;&amp; id.length > 1) return this.getFeaturesById(id);
        if (typeof id === 'object') id = id.parent || id.properties.parent || id.id || id.properties.id;
        return getFeatureByIdHelper.call(this, id);
    };

    this.getFeaturesById = function (ids = []) {
        const addedIds = new Set();
        const result = [];
        ids.forEach((id) => {
            const feature = this.getFeatureById(id);
            if (feature &amp;&amp; !addedIds.has(id)) {
                addedIds.add(id);
                result.push(feature);
            }
        });
        return result;
    };

    this.getType = function (feature) {
        return getType(feature);
    };

    this.getUnit = function (feature) {
        if (!feature) return false;
        const type = feature.properties.type;
        if (!type) return false;
        if (!geoflo.options.units || !geoflo.options.units[type]) return false;
        return geoflo.options.units[type];
    };

    this.getUnits = function (feature) {
        const unit = this.getUnit(feature);
        if (!unit || !feature) return false;
        let units = 1;
        const type = feature.properties.type;
        if (type === "Polyline") {
            units = turf.length(feature, { units: 'meters' });
        } else if (type === 'Polygon' || type === 'Rectangle') {
            units = turf.area(feature);
        }
        return units;
    };

    this.getFeatureState = function (id) {
        if (!id) return false;
        return geoflo.map.getFeatureState({ source: geoflo.statics.constants.sources.COLD, id: id });
    };



    this.setFeaturesState = function (features = [], state) {
        if (!state || features.length === 0) return [];
        features.forEach((feature) => {
            const id = feature.id || feature.properties.id;
            if (geoflo.hotFeature &amp;&amp; geoflo.hotFeature.id === id) return;
            this.setFeatureState(id, state);
        });
        return features;
    };

    this.setFeatureState = function (id, state) {
        if (!state || !id) return false;
        const features = getFeaturesByParentHelper.call(this, id);
        features.forEach((feature) => {
            const fid = feature.id || feature.properties.id;
            geoflo.map.setFeatureState({ source: feature.source, id: fid }, state);
        });
        return features;
    };

    this.setText = function (features = []) {
        if (!geoflo.options.showFeatureText) return false;
        let source = geoflo.statics.constants.sources.HOTTEXT;
        let textFeaturesArr = [];
        if (features.features) features = features.features;
        if (!Array.isArray(features)) features = [features];
        features.forEach((feature) => {
            const type = feature.properties.type;
            if (!type) return;
            this.currentType = type;
            if (type === 'Polyline' &amp;&amp; geoflo.Utilities.isValidLineString(feature) &amp;&amp; geoflo.options.showLineUnits) {
                turf.segmentEach(feature, setLineText.bind(this));
            } else {
                source = geoflo.statics.constants.sources.SELECT;
                const feat = geoflo.Utilities.cloneDeep(feature);
                feat.properties = {
                    type: 'Text',
                    text: feature.properties.text,
                    style: feature.properties.style
                };
                textFeaturesArr.push(feat);
            }
        });
        geoflo.map.getSource(source).setData(turf.featureCollection(textFeaturesArr));
        delete this.currentType;
        return true;
    };



    this.addFeature = function (feature, source, properties = {}) {
        if (!feature || !feature.properties) return false;
        feature = turf.cleanCoords(feature);
        feature = turf.truncate(feature, { precision: 6, coordinates: 3, mutate: true });
        feature.properties = geoflo.Utilities.assignDeep(properties, feature.properties);
        feature.source = source || feature.source || feature.properties.source || geoflo.statics.constants.sources.COLD;
        delete feature.properties.source;
        delete feature.properties.painting;
        delete feature.properties.edit;
        delete feature.properties.new;
        delete feature.properties._selected;
        delete feature.properties.hidden;
        delete feature.properties.offset;
        feature.properties.style = feature.properties.style || {};
        this.addUnits(feature);
        this.addFeatures([feature]);
        return feature;
    };

    this.addFeatures = function (features, unselect, id) {
        let update = false;
        const sources = new Set();
        features.forEach((feature) => {
            feature.id = feature.id || feature.properties.id || URL.createObjectURL(new Blob([])).slice(-36);
            if (id &amp;&amp; feature.id !== id) return;
            feature.source = feature.source || feature.properties.source || geoflo.statics.constants.sources.COLD;
            feature.properties.id = feature.id;
            feature.properties.type = this.getType(feature);
            if (this.featuresMap.has(feature.id)) {
                this.setFeatureState(feature.id, { hidden: !unselect });
                this.featuresMap.set(feature.id, feature);
                update = !unselect;
                if (unselect) delete feature.properties._selected;
            } else {
                update = !this.updatingFeatures;
                this.featuresMap.set(feature.id, feature);
            }
            if (unselect) delete feature.properties._selected;
            sources.add(feature.source);
        });
        if (update) this.updateSource(Array.from(sources));
        return features;
    };

    this.addUnits = function (feature, convertTo) {
        const unit = convertTo || this.getUnit(feature);
        if (!unit) return false;
        const units = this.convertUnits(feature, null, convertTo);
        feature.geometry.units = units;
        feature.geometry.unit = unit;
        return feature;
    };



    this.isFeatureHidden = function (id) {
        if (!id) return false;
        var state = this.getFeatureState(id);
        return state.hidden;
    }



    this.updateFeatures = function (features, options = {}) {
        features = features || [].concat(geoflo.getDrawnFeatures(), geoflo.getSelectedFeatures());
        const sources = new Set();
        const selectedFeatures = geoflo.getSelectedFeatures();

        this.updatingFeatures = true;

        features.forEach((feature) => {
            const id = feature.id || feature.properties.id;
            if (!id) return;

            const originalFeature = this.getFeatureById(id);
            if (!originalFeature) return this.addFeature(feature);

            const selected = selectedFeatures.find((f) => f.id === id || f.properties.id === id);

            if (selected &amp;&amp; !geoflo.noSelect) {
                selected.geometry.coordinates = feature.geometry.coordinates;
                selected.properties = feature.properties;
                selected.properties._selected = true;
                geoflo.map.getSource(geoflo.statics.constants.sources.SELECT).setData(turf.featureCollection(selectedFeatures));
                geoflo.map.getSource(geoflo.statics.constants.sources.VERTEX).setData(turf.featureCollection(selectedFeatures));
                return;
            } else if (!sources.has(originalFeature.source)) {
                originalFeature.properties._selected = false;
                sources.add(originalFeature.source);
            }

            originalFeature.geometry.coordinates = feature.geometry.coordinates;
            originalFeature.properties = feature.properties;

            if (options.addUnits) this.addUnits(originalFeature);
        });

        this.updatingFeatures = false;
        if (sources.size === 0) return features;
        requestAnimationFrame(() => { this.updateSource(Array.from(sources)); });
    };

    this.updateSource = function (sources = []) {
        if (this._updateSourceTimeout) clearTimeout(this._updateSourceTimeout);

        this._updateSourceTimeout = setTimeout(() => {
            const sourceFeatures = {};
            const unsourceFeatures = [];
            const textSource = geoflo.map.getSource(geoflo.statics.constants.sources.COLDTEXT);
            const coldSource = geoflo.map.getSource(geoflo.statics.constants.sources.COLD);

            geoflo.updatingSource = true;

            if (textSource) textSource.setData(turf.featureCollection([]));
            if (coldSource) coldSource.setData(turf.featureCollection([]));
            geoflo.map.getSource(geoflo.statics.constants.sources.SELECT).setData(turf.featureCollection([]));

            // Group features by source from the featuresMap
            Array.from(this.featuresMap.values()).forEach((feature) => {
                delete feature.properties.new;
                delete feature.properties.offset;
                const src = feature.source;
                if (sources.length &amp;&amp; !sources.includes(src)) return;
                if (!src) return unsourceFeatures.push(feature);
                if (!sourceFeatures[src]) sourceFeatures[src] = [];
                sourceFeatures[src].push(feature);
            });

            if (this.featuresMap.size === 0) {
                geoflo.Layers.getCustomLayers().forEach((layer) => {
                    if (!layer.details || !layer.details.source) return;
                    const src = layer.details.source;
                    if (!geoflo.map.getSource(src)) return;
                    geoflo.map.getSource(src).setData(turf.featureCollection([]));
                });
            }

            Object.entries(sourceFeatures).forEach(([src, features]) => {
                if (!geoflo.map.getSource(src)) return unsourceFeatures.push(features);
                setLineOffsetHelper(features, src);
            });

            setLineOffsetHelper(unsourceFeatures.flat(), geoflo.statics.constants.sources.COLD);
            setTimeout(() => { this.setFeaturesState(Array.from(this.featuresMap.values()), { hidden: false }); }, 100);
            geoflo.fire('features.update', { features: Array.from(this.featuresMap.values()) });
            geoflo.updatingSource = false;
        }, 50);

        return Array.from(this.featuresMap.values());
    }



    this.removeFeature = function (id) {
        const removedFeatures = [];
        if (!this.featuresMap.has(id)) return removedFeatures;
        const feature = this.featuresMap.get(id);
        this.featuresMap.delete(id);
        removedFeatures.push(feature);
        this.updateSource([feature.source]);
        return removedFeatures;
    };

    this.removeLayers = function (layerSources = [], options = {}) {
        if (options.reset) return this.deleteFeatures();
        const removedFeatures = [];
        this.featuresMap.forEach((feature, fid) => {
            if (layerSources.includes(feature.source)) {
                removedFeatures.push(feature);
                this.featuresMap.delete(fid);
            }
        });
        this.updateSource(Array.from(new Set(removedFeatures.map(f => f.source))));
    };



    this.deleteFeatures = function () {
        this.featuresMap.clear();
        this.updateSource();
    };

    this.convertUnits = function (feature, units, convertTo) {
        if (!feature) return 0;
        const type = feature.properties.type;
        const unit = convertTo || this.getUnit(feature);
        units = units || this.getUnits(feature);
        if (type === "Polyline") {
            units = Math.round(turf.convertLength(units, 'meters', unit));
        } else if (type === 'Polygon' || type === 'Rectangle') {
            units = Math.round(turf.convertArea(units, 'meters', unit));
        }
        units = units ? Number(units.toFixed(2)) : 0;
        return units;
    };



    function getFeatureByIdHelper(id) {
        let feature = this.featuresMap.get(id);
        if (!feature) {
            feature = geoflo.getSelectedFeatures().find(f => f.id === id || f.properties.id === id);
        }
        return feature;
    }

    function getFeaturesByParentHelper(id) {
        const feature = (typeof id === 'object' &amp;&amp; id.id) ? id : getFeatureByIdHelper.call(this, id);
        if (!feature || !feature.source) return [];
        const sourceData = geoflo.map.getSource(feature.source)?._data;
        if (!sourceData) return [];
        const field = geoflo.options.offsetOverlappingLines ? 'parent' : 'id';
        return sourceData.features.filter(f => f[field] === id || f.properties[field] === id);
    }

    function createTextFeatures(feature) {
        const isLine = geoflo.Utilities.isValidLineString(feature);
        const segments = [];
        if (isLine) {
            turf.segmentEach(feature, function (currentSegment) {
                const segment = geoflo.Utilities.cloneDeep(currentSegment);
                let footage = Math.round(turf.length(segment, { units: 'miles' }) * 5280);
                let mileage = Number(turf.length(segment, { units: 'miles' }).toFixed(3));
                footage = Number(footage.toFixed(2));
                mileage = Number(mileage.toFixed(2));
                segment.properties.footage = footage;
                segment.properties.mileage = mileage;
                segment.properties.text = `${mileage} miles`;
                segments.push(segment);
            });
        }
        return segments;
    }

    function setLineText(segment) {
        const seg = geoflo.Utilities.cloneDeep(segment);
        seg.properties.type = this.currentType;
        const text = turf.point(seg.geometry.coordinates[1]);
        let units = this.getUnits(seg);
        const unit = 'feet';
        units = this.convertUnits(seg, units, unit);
        text.properties.units = units;
        text.properties.unit = unit;
        text.properties.text = `${units} ${unit}`;
        text.properties.transform = 'uppercase';
        text.properties.anchor = 'bottom-left';
        this.textFeatures.push(text);
        return text;
    }

    function setLineOffsetHelper(features, src) {
        if (!features || !features.length || !src || !geoflo.map.getSource(src)) return false;
        if (!geoflo.options.offsetOverlappingLines)
            return geoflo.map.getSource(src).setData(turf.featureCollection(features));
        const mesh = new geoflo.Mesh(features, true);
        const offsetFeatures = mesh.getFeatures();
        offsetFeatures.forEach((feature) => {
            const f = features.find((fe) => fe.id === feature.parent);
            if (!f) return;
            feature.source = src;
            feature.properties.style = f.properties.style || feature.properties.style;
            setOverlapOffsetHelper(offsetFeatures, feature);
        });
        geoflo.map.getSource(src).setData(turf.featureCollection(offsetFeatures));
        geoflo.fire('features.offset', { features: features, offset: offsetFeatures, source: src });
    }

    function setOverlapOffsetHelper(features, feature) {
        if (!geoflo.options.offsetOverlappingLines) return false;
        if (!isPolylineHelper(feature)) return false;
        if (feature.properties.offset) return false;
        let offset = 6;
        const overlaps = [];
        features.forEach((f) => {
            if (!isPolylineHelper(f)) return false;
            if (f.parent === feature.parent) return false;
            if (f.properties.offset) return false;
            const overlap = turf.booleanOverlap(f, feature) || turf.booleanWithin(f, feature);
            if (!overlap) return false;
            overlaps.push(f);
        });
        overlaps.forEach((f) => {
            f.properties.offset = offset;
            offset = offset * 2;
        });
    }

    function setWithinOffsetHelper(features) {
        if (!geoflo.options.offsetOverlappingLines) return false;
        const adder = 4;
        const miles = 0.00189394; // 10 Feet
        const explode = turf.explode(turf.featureCollection(features));
        if (!explode || !explode.features.length) return;
        explode.features.forEach((feature) => {
            if (feature.properties.offset) return false;
            const buffer = turf.buffer(feature, miles, { units: 'miles' });
            const within = turf.pointsWithinPolygon(explode, buffer);
            if (!within || !within.features.length) return;
            let offset = adder;
            within.features.forEach((f) => {
                if (f.properties.id === feature.properties.id || f.properties.offset) return;
                f.properties.offset = offset;
                offset = offset + adder;
            });
        });
    }

    function isPolylineHelper(feature) {
        if (!feature) return false;
        const type = geoflo.Layers.getLayerType(feature.source);
        return turf.getType(feature) === 'LineString';
    }

    function isPolygonHelper(feature) {
        if (!feature) return false;
        const type = geoflo.Layers.getLayerType(feature.source);
        return turf.getType(feature) === 'Polygon' || feature.properties.type === 'Polygon' || type === 'Polygon';
    }

    function isRectangleHelper(feature) {
        if (!feature) return false;
        const type = geoflo.Layers.getLayerType(feature.source);
        return (turf.getType(feature) === 'Polygon' &amp;&amp; feature.properties.type === 'Rectangle') || type === 'Rectangle';
    }

    function isPointHelper(feature) {
        if (!feature) return false;
        const type = geoflo.Layers.getLayerType(feature.source);
        if (turf.getType(feature) === 'Point' &amp;&amp; (!feature.properties.type || feature.properties.type === 'Circle')) return true;
        if (turf.getType(feature) === 'Point' &amp;&amp; (type === 'Point' || type === 'Circle')) return true;
        return turf.getType(feature) === 'Point' &amp;&amp; (feature.properties.type !== 'Text' &amp;&amp; feature.properties.type !== 'Icon' &amp;&amp; feature.properties.type !== 'Image');
    }

    function isTextHelper(feature) {
        if (!feature) return false;
        const type = geoflo.Layers.getLayerType(feature.source);
        if (type === 'Text') return true;
        return turf.getType(feature) === 'Point' &amp;&amp; feature.properties.type === 'Text';
    }

    function isIconHelper(feature) {
        if (!feature) return false;
        const type = geoflo.Layers.getLayerType(feature.source);
        if (type === 'Icon') return true;
        return turf.getType(feature) === 'Point' &amp;&amp; feature.properties.type === 'Icon';
    }

    function isImageHelper(feature) {
        if (!feature) return false;
        const type = geoflo.Layers.getLayerType(feature.source);
        if (type === 'Image') return true;
        return turf.getType(feature) === 'Point' &amp;&amp; feature.properties.type === 'Image';
    }

    function getType(feature) {
        if (!feature) return null;
        return isRectangleHelper(feature) ? 'Rectangle' :
            isPolygonHelper(feature) ? 'Polygon' :
                isPolylineHelper(feature) ? 'Polyline' :
                    isTextHelper(feature) ? 'Text' :
                        isIconHelper(feature) ? 'Icon' :
                            isImageHelper(feature) ? 'Image' :
                                isPointHelper(feature) ? 'Circle' :
                                    null;
    }
};

export default Features;</code></pre>
        </article>
    </section>




</div>

<footer>
    <img class="logo" src="https://geoflo.s3.amazonaws.com/logos/logo_full_white.png" style="">
    <div class="footer-text">Solutegrate/GeoFlo © 2025</div>
</footer>
<script>prettyPrint();</script>
<script src="scripts/jquery.min.js"></script>
<script src="scripts/tui-doc.js"></script>
<script src="scripts/linenumber.js"></script>

    <script>
        var id = '_sub'.replace(/"/g, '_');
        var selectedApi = document.getElementById(id); // do not use jquery selector
        var $selectedApi = $(selectedApi);

        $selectedApi.removeClass('hidden');
        $selectedApi.parent().find('.glyphicon').removeClass('glyphicon-plus').addClass('glyphicon-minus');
        showLnbApi();
    </script>

</body>
</html>
