/*! For license information please see https://sdk.geoflo.pro/geoflo.gaming.min.js.LICENSE.txt */

/*! 
 * GeoFlo SDK
 * Version 1.0.4
 * Generated on: 2025-02-18T19:13:23.934Z
 * Copyright (c) 2022 - present | @solutegrate/geoflo
 */

"use strict";(self.webpackChunk_solutegrate_geoflo=self.webpackChunk_solutegrate_geoflo||[]).push([[320],{53:(t,i,e)=>{function n(t,i,e){return(i=function(t){var i=function(t,i){if("object"!=o(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,i||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(t)}(t,"string");return"symbol"==o(i)?i:i+""}(i))in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function a(t,i){return function(t){if(Array.isArray(t))return t}(t)||function(t,i){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,o,a,s,r=[],p=!0,h=!1;try{if(a=(e=e.call(t)).next,0===i){if(Object(e)!==e)return;p=!1}else for(;!(p=(n=a.call(e)).done)&&(r.push(n.value),r.length!==i);p=!0);}catch(t){h=!0,o=t}finally{try{if(!p&&null!=e.return&&(s=e.return(),Object(s)!==s))return}finally{if(h)throw o}}return r}}(t,i)||function(t,i){if(t){if("string"==typeof t)return s(t,i);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?s(t,i):void 0}}(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,i){(null==i||i>t.length)&&(i=t.length);for(var e=0,n=Array(i);e<i;e++)n[e]=t[e];return n}e.r(i),e.d(i,{default:()=>r});const r=function(t){var i=this.geoflo;if(!(window.navigator.getGamepads&&"function"==typeof window.navigator.getGamepads||window.navigator.getGamepads&&"function"==typeof window.navigator.webkitGetGamepads))throw new Error("Gamepads are not supported on your browser!");var e=this;this.options=i.options.gamepad;var o={select:"Select",start:"Start",power:"Power",button0:"B",button1:"A",button2:"Y",button3:"X",button4:"BumpLeft",button5:"BumpRight",button6:"TrigLeft",button7:"TrigRight",button8:"Select",button9:"Start",button10:"JoyLeftClick",button11:"JoyRightClick",button12:"DpadUp",button13:"DpadDown",button14:"DpadLeft",button15:"DpadRight",button16:"Power",button17:"Misc",up0:"JoyLeftUp",down0:"JoyLeftDown",right0:"JoyLeftRight",left0:"JoyLeftLeft",up1:"JoyRightUp",down1:"JoyRightDown",right1:"JoyRightRight",left1:"JoyRightLeft",l1:"BumpLeft",r1:"BumpRight",l2:"TrigLeft",r2:"TrigRight"};function s(t,i){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.2,n=Math.sqrt(t*t+i*i);if(n<e)return[0,0];var o=(n-e)/(1-e);return[t/n*o,i/n*o]}function r(){e.refresh(),requestAnimationFrame(r)}function p(t,i){if(!i||!o)return!1;Object.entries(o).forEach((function(i){var n,o,a=i[0],s=i[1];n=a,o=function(i){return t.onEvent("press",a,s,i)},e.associateEvent(n,o,"before"),function(t,i){e.associateEvent(t,i,"action")}(a,(function(i){return t.onEvent("hold",a,s,i)})),function(t,i){e.associateEvent(t,i,"after")}(a,(function(i){return t.onEvent("release",a,s,i)}))}))}function h(t,i,e){var n=c(t[1]),o=c(t[0]),a=c(i[1]),s=c(i[0]),r=a-n,p=s-o,h=Math.sin(r/2)*Math.sin(r/2)+Math.cos(n)*Math.cos(a)*Math.sin(p/2)*Math.sin(p/2),f=2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h)),g=Math.sin((1-e)*f)/Math.sin(f),m=Math.sin(e*f)/Math.sin(f),d=g*Math.cos(n)*Math.cos(o)+m*Math.cos(a)*Math.cos(s),l=g*Math.cos(n)*Math.sin(o)+m*Math.cos(a)*Math.sin(s),b=g*Math.sin(n)+m*Math.sin(a),v=Math.atan2(b,Math.sqrt(d*d+l*l));return[u(Math.atan2(l,d)),u(v)]}function c(t){return t*(Math.PI/180)}function u(t){return t*(180/Math.PI)}this.init=function(t,e){return!!t&&(this.options.enable?(i.map.fire(i.id+":gamepad.init",{detail:{gamepad:t}}),this.setGamepad(t),p(this,this.gamepad),requestAnimationFrame(r),this):void 0)},this.refresh=function(){for(var t,i,e,n=window.navigator.getGamepads(),o=0;o<n.length;o++){var r,p=n[this.gamepad.id];if(p&&p.connected){for(r=0;r<p.buttons.length;r++){var h=p.buttons[r],c=h.value,u=this.gamepad.layout["button".concat(r)];h.pressed?(this.gamepad.pressed[u]||(this.gamepad.pressed[u]=!0,this.gamepad.buttonActions[r].before&&this.gamepad.buttonActions[r].before(c)),this.gamepad.buttonActions[r].action&&this.gamepad.buttonActions[r].action(c)):this.gamepad.pressed[u]&&(delete this.gamepad.pressed[u],this.gamepad.buttonActions[r].after&&this.gamepad.buttonActions[r].after(c))}var f=(p.axes.length+1)/2|0;for(r=0;r<f;r++){var g,m,d=r==f-1&&p.axes.length%2==1,l=a(s(g=p.axes[2*r],m=d?0:p.axes[2*r+1]),2);g=l[0],m=l[1];var b=a((t=g,i=m,e=void 0,(e=Math.sqrt(t*t+i*i))>1&&(t/=e,i/=e),[t,i]),2);g=b[0],m=b[1],c=[Number(g.toFixed(2)),Number(m.toFixed(2))];var v=p.axes[r+f].toFixed(4),y=Math.floor(r/2);this.gamepad.axeValues[y][r%2]=v;var M=c[0]>=this.options.joystick.min,w=c[0]<=-this.options.joystick.min,A=c[1]<=-this.options.joystick.min,L=c[1]>=this.options.joystick.min;this.trigger("right",M,r,c),this.trigger("left",w,r,c),this.trigger("down",L,r,c),this.trigger("up",A,r,c)}}}},this.trigger=function(t,i,e,n){var o=this.gamepad.axesActions,a=this.gamepad.layout["".concat(t).concat(e)],s=this.gamepad.pressed;i?(s[a]||(s[a]=!0,o[e][t].before&&o[e][t].before(n)),n=[this.options.joystick.max*n[0],this.options.joystick.max*n[1]],o[e][t].action&&o[e][t].action(n)):s[a]&&(delete s[a],s.JoyLeftUp||s.JoyLeftDown||s.JoyLeftLeft||s.JoyLeftRight||o[0][t].after&&o[0][t].after(n),s.JoyRightUp||s.JoyRightDown||s.JoyRightLeft||s.JoyRightRight||o[1][t].after&&o[1][t].after(n))},this.remove=function(){this.gamepad.disconnect&&this.gamepad.disconnect(),this.gamepad.remove&&this.gamepad.remove(),this.gamepad=null},this.setMap=function(t){var e=i.map,n=e.transform;this.map=this.map||{center:e.getCenter(),zoom:e.getZoom(),pitch:e.getPitch(),bearing:e.getBearing()};var o=this.map.center.x||this.map.center.lat?this.map.center:new mapboxgl.LngLat(this.map.center[0],this.map.center[1]);return o=o.x?n.pointLocation(o):o,n.center=o,n.bearing=this.map.bearing,n.zoom=this.map.zoom,n.pitch=this.map.pitch,e._update(),this.options.crosshairs&&i.centerMarker&&this.setMarker(),t&&i.currentMode.handleMove({lngLat:this.options.camera.free?e.getCenter():this.map.center,gamepad:this}),this.map},this.setContainer=function(t,i,e){var n=window.document.createElement(t);return void 0!==i&&(n.className=i),e&&e.appendChild(n),this.container=n,n},this.setLocation=function(t){return this.container.style.visibility=this.options.debug?"visible":"hidden",this.container.style.left=(t[0]+1)/2*100+"%",this.container.style.top=(t[1]+1)/2*100+"%",this.container.getBoundingClientRect()},this.setMarker=function(){return i.setCenterMarker({gamepad:!0})},this.setGamepad=function(t){for(var i={type:t.id,connected:t.connected,id:t.index,buttons:t.buttons.length,layout:o,axes:Math.floor(t.axes.length/2),axeValues:[],hapticActuator:null,vibrationMode:-1,vibration:!1,mapping:t.mapping,buttonActions:{},axesActions:{},pressed:{}},e=0;e<i.buttons;e++)i.buttonActions[e]=function(){return{action:function(){},after:function(){},before:function(){}}};for(var n=0;n<i.axes;n++)i.axesActions[n]={down:function(){return{action:function(){},after:function(){},before:function(){}}},left:function(){return{action:function(){},after:function(){},before:function(){}}},right:function(){return{action:function(){},after:function(){},before:function(){}}},up:function(){return{action:function(){},after:function(){},before:function(){}}}},i.axeValues[n]=[0,0];return t.hapticActuators&&("function"==typeof t.hapticActuators.pulse?(i.haptic=t.hapticActuators,i.vibrationMode=0,i.vibration=!0):t.hapticActuators[0]&&"function"==typeof t.hapticActuators[0].pulse&&(i.haptic=t.hapticActuators[0],i.vibrationMode=0,i.vibration=!0)),t.vibrationActuator&&"function"==typeof t.vibrationActuator.playEffect&&(i.haptic=t.vibrationActuator,i.vibrationMode=1,i.vibration=!0),this.gamepad=i,this.hasJoysticks=i.axes>0&&Object.values(this.gamepad.layout).map((function(t){return t.includes("Joy")})).filter((function(t){return t})).length>0,this.gamepad},this.setCenter=function(t,e,n){var o,a=i.map.getCenter(),s=this.gamepad.pressed,r=this.hasJoysticks?"Joy":"Dpad",p=Object.keys(s).filter((function(t){return t.includes(r)})).length>1,c=!(!e&&!n)&&a;if(c=(c=!(!i.hotFeature||c)&&(i.lastMove||a))||a,n){var u=this.map.bearing;u=s.Up?u:s.Down?u+180:s.Left?u-90:s.Right?u+90:u;var f=turf.destination(turf.point(c),distance,u).geometry.coordinates;lngLats=e?{lng:f[1],lat:f[0]}:f}else if(t){var g=this.setLocation(t),m=!(!g||!g.x)&&[g.x,g.y];o=i.map.unproject(m);var d=p?this.options.pan.speed/2:this.options.pan.speed,l=h([c.lng,c.lat],[o.lng,o.lat],d);o=l=i.map.getPitch()>60?h([c.lng,c.lat],[l[0],l[1]],.4):l,i.lastMove=o}else{m=!!i.hotFeature&&i.hotFeature.geometry.coordinates;o=e?i.map.getCenter():m?{lat:m[m.length-1][1],lng:m[m.length-1][0]}:i.map.getCenter(),i.lastMove=!1,this.setLocation([0,0])}return this.map.center=o,this.setMap(!0)},this.setBearing=function(t,i,e){var n=this.map.bearing,o=e?t:Math.abs(t[0]);return i?n-=this.options.bearing.speed*o:n+=this.options.bearing.speed*o,this.map.bearing=n,this.setMap()},this.setPitch=function(t,i,e){var n=this.map.pitch,o=e?t:Math.abs(t[1]);return n<0&&(n=0),n>this.options.pitch.max&&(n=this.options.pitch.max),i?n+=this.options.pitch.speed*o:n-=this.options.pitch.speed*o,this.map.pitch=n,this.setMap()},this.setZoom=function(t,i,e){var n=this.map.zoom;return i?n-=this.options.zoom.speed*Math.abs(t):n+=this.options.zoom.speed*Math.abs(t),this.map.zoom=n,this.setMap()},this.setSpeed=function(t,i){var e=this.options.pan.speed>this.options.pan.min?this.options.pan.speed:(this.options.pan.max&&(this.options.pan.speed,this.options.pan.max),this.options.pan.min);return e=(e=i?e-this.options.pan.min:e+this.options.pan.min)<this.options.pan.min?this.options.pan.min:this.options.pan.max&&e>this.options.pan.max?this.options.pan.max:e,this.options.pan.speed=e*Math.abs(t)},this.associateEvent=function(t,i,e){if(t.match(/^button\d+$/)){var n=parseInt(t.match(/^button(\d+)$/)[1]);n>=0&&n<this.gamepad.buttons&&(this.gamepad.buttonActions[n][e]=i)}else if("start"===t)this.gamepad.buttonActions[9][e]=i;else if("select"===t)this.gamepad.buttonActions[8][e]=i;else if("r1"===t)this.gamepad.buttonActions[5][e]=i;else if("r2"===t)this.gamepad.buttonActions[7][e]=i;else if("l1"===t)this.gamepad.buttonActions[4][e]=i;else if("l2"===t)this.gamepad.buttonActions[6][e]=i;else if("power"===t)this.gamepad.buttons>=17?this.gamepad.buttonActions[16][e]=i:error(MESSAGES.INVALID_BUTTON);else if(t.match(/^(up|down|left|right)(\d+)$/)){var o=t.match(/^(up|down|left|right)(\d+)$/),a=o[1],s=parseInt(o[2]);s>=0&&s<this.gamepad.axes?this.gamepad.axesActions[s][a][e]=i:error(MESSAGES.INVALID_BUTTON)}else if(t.match(/^(up|down|left|right)$/)){var r=t.match(/^(up|down|left|right)$/)[1];this.gamepad.axesActions[0][r][e]=i}return this.gamepad},this.onInit=function(t){this.initiated=!0,this.setContainer("div","gamepad",i.map.getContainer()),this.setMarker(),this.setMap()},this.onEvent=function(t,e,o,a){var s=n({},o,!0),r=this.options.camera.free?i.map.getCenter():i.lastMove?i.lastMove:i.map.getCenter(),p={name:o,type:t,key:e,value:a,mode:i.currentMode,gamepad:this,lngLat:r,geoflo:i,originalEvent:{}};this.initiated||this.onInit(p),i.map.fire(i.id+":gamepad."+t,{detail:p}),(s.JoyLeftUp||s.JoyLeftDown||s.JoyLeftLeft||s.JoyLeftRight)&&this.options.mapping.JoyLeftMove(p),(s.JoyRightUp||s.JoyRightDown||s.JoyRightLeft||s.JoyRightRight)&&this.options.mapping.JoyRightMove(p),s.JoyLeftClick&&this.options.mapping.JoyLeftClick(p),s.JoyRightClick&&this.options.mapping.JoyRightClick(p),s.BumpLeft&&this.options.mapping.BumpLeft(p),s.BumpRight&&this.options.mapping.BumpRight(p),s.TrigLeft&&this.options.mapping.TrigLeft(p),s.TrigRight&&this.options.mapping.TrigRight(p),s.A&&this.options.mapping.A(p),s.B&&this.options.mapping.B(p),s.X&&this.options.mapping.X(p),s.Y&&this.options.mapping.Y(p),s.Start&&this.options.mapping.Start(p),s.Select&&this.options.mapping.Select(p),s.Power&&this.options.mapping.Power(p),s.Home&&this.options.mapping.Home(p),s.Misc&&this.options.mapping.Misc(p),s.DpadUp&&this.options.mapping.DpadUp(p),s.DpadDown&&this.options.mapping.DpadDown(p),s.DpadLeft&&this.options.mapping.DpadLeft(p),s.DpadRight&&this.options.mapping.DpadRight(p)},this.onDisconnect=function(t){if(!t||!this.gamepad)return!1;if(this.gamepad.id!==t.id)throw new Error("Gamepad id does not match!");this.gamepad.remove(),this.gamepad=null},this.init(t)}}}]);